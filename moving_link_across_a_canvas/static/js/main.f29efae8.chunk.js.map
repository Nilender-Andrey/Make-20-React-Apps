{"version":3,"sources":["img/XSA2Oom.gif","img/JYUB0m3.png","App.tsx","useMovement.ts","img/4LGAZ8t.gif","img/GEXD7bk.gif","index.tsx"],"names":["App","canvasRef","useRef","imgUrlRef","useState","x","setX","y","setY","direction","setDirection","move","dir","k","window","innerHeight","innerWidth","useEffect","handleKeyDown","e","code","addEventListener","removeEventListener","useMovement","current","context","getContext","canvas","height","width","img","Image","src","downImg","onload","drawImage","clearRect","className","ref","onClick","type","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f29efae8.chunk.js","sourcesContent":["export default \"data:image/gif;base64,R0lGODlhGAAgAPEAALj4GORcEACI//+gRCH/C05FVFNDQVBFMi4wAwEAAAAh+QQBGQACACwAAAAAGAAgAAACgpQPqZvnzyJ4UFpq7D1jZB0ZXfeBizia2jioFhsErhLD8gzU7BDHVh/YjYC/HgsF9NGSJA4vuUgGPQelVJqIOaxXYi6w7c2ABq8K2DGb0E/l2di+gciCtHjdQ3Wy3XujnvLVJzeBgHNiePgXNpdE4SYhhSFAV3Y1WUl5OcmZyYmRWQAAOw==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAgAgMAAAB4LiDsAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAADFBMVEUAiP+4+Bj/oETkXBC3SAr7AAAAAXRSTlMAQObYZgAAAAFiS0dEAxEMTPIAAABqSURBVBjTVc+hFsAgCIVhimXFV1uhWHw1C4XCq1kslju24OBP3zkQgIgK801vB+wljA6sKwFegu4mphnbMi71LKI029IDKqDKmD9gWMwWsBW2mgb4SHx/JNjiRgGAfO8c+BWzIsKHkyjgAWfBggG544yMAAAAAElFTkSuQmCC\"","import React, { useEffect, useRef } from 'react';\nimport { Button, ButtonGroup } from '@chakra-ui/react';\nimport './App.css';\nimport useMovement from './useMovement';\n\nimport upImg from './img/XSA2Oom.gif';\nimport downImg from './img/JYUB0m3.png';\nimport rightImg from './img/GEXD7bk.gif';\nimport leftImg from './img/4LGAZ8t.gif';\n\nexport default function App() {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const imgUrlRef = useRef('./img/JYUB0m3.png');\n\n  const {\n    x,\n    y,\n    direction,\n    move,\n  } = useMovement();\n\n  // начальная загрузка\n  useEffect(() => {\n    if (canvasRef.current) {\n      const context = canvasRef.current.getContext('2d');\n      if (context) {\n        context.canvas.height = window.innerHeight;\n        context.canvas.width = window.innerWidth;\n\n        const img = new Image();\n        img.src = downImg;\n        img.onload = () => context.drawImage(img, x, y);\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    if (canvasRef.current) {\n      const context = canvasRef.current.getContext('2d');\n      if (context) {\n        context.clearRect(0, 0, window.innerWidth, window.innerHeight);\n\n        const img = new Image();\n\n        let src;\n        if (direction === 'up') src = upImg;\n        if (direction === 'down') src = downImg;\n        if (direction === 'left') src = leftImg;\n        if (direction === 'right') src = rightImg;\n        if (src) {\n          img.src = src;\n          if (src === imgUrlRef.current) {\n            context.drawImage(img, x, y);\n          } else {\n            imgUrlRef.current = src;\n            img.onload = () => context.drawImage(img, x, y);\n          }\n        }\n      }\n    }\n  }, [x, y]);\n\n  return (\n\n    <div className=\"app\">\n      <canvas ref={canvasRef} />\n\n      <ButtonGroup className=\"arrows\">\n        <Button className=\"button up\" onClick={() => move('up')} type=\"button\">Up</Button>\n        <Button className=\"button left\" onClick={() => move('left')} type=\"button\">Left</Button>\n        <Button className=\"button down\" onClick={() => move('down')} type=\"button\">Down</Button>\n        <Button className=\"button right\" onClick={() => move('right')} type=\"button\">Right</Button>\n      </ButtonGroup>\n\n    </div>\n\n  );\n}\n","import { useEffect, useState } from 'react';\n\nconst STEP = 5;\n\nexport default function useMovement() {\n  const [x, setX] = useState(0);\n  const [y, setY] = useState(0);\n  const [direction, setDirection] = useState('down');\n\n  function move(dir: string) {\n    setDirection(dir);\n\n    switch (dir) {\n      case 'up':\n        setY((k) => (k - STEP < 0 ? k : k - STEP));\n        break;\n      case 'down':\n        setY((k) => (k + STEP > window.innerHeight - 25 ? k : k + STEP));\n        break;\n      case 'left':\n        setX((k) => (k - 10 < 0 ? k : k - STEP));\n        break;\n      case 'right':\n        setX((k) => (k + STEP > window.innerWidth - 25 ? k : k + STEP));\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  useEffect(() => {\n    function handleKeyDown(e: KeyboardEvent) {\n      if (e.code === 'ArrowUp') move('up');\n      if (e.code === 'ArrowDown') move('down');\n      if (e.code === 'ArrowLeft') move('left');\n      if (e.code === 'ArrowRight') move('right');\n    }\n\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  return {\n    x,\n    y,\n    direction,\n    move,\n  };\n}\n","export default \"data:image/gif;base64,R0lGODlhHgAgAPEAAORcEACI/7j4GP+gRCH/C05FVFNDQVBFMi4wAwEAAAAh+QQBGQABACwAAAAAHgAgAAACpoyPqcvtr4ScEjpK7QG8c4xBngdmzYgC1DCASjqubbjAHsuWwmtz+OxK5AQ/3w+4C1SEsyLgiDQsoUZWdUBKIqhP3DXLM0C5HgZHPHaWawA0VOc4B9LwU/d2pIATRvxP37GE0KdCdNTDY1VIlhIW8DGhliL42FYpowhDKWcACYhi0mkpCqI5MWgpYaqzJqc6qSOwJuoZ+9mBWmv7OrsxEvfL1suzVgAAOw==\"","export default \"data:image/gif;base64,R0lGODlhHgAgAPEAAORcEACI/7j4GP+gRCH/C05FVFNDQVBFMi4wAwEAAAAh+QQBGQABACwAAAAAHgAgAAACqYyPqcvtj4ScEjpKbcIY+O9BHAWCDDcMZMkqqDqx7TEKaSqX7ngPubkRGCg9HKAnSe2Gk6LveEsOLgJQz3OF9nbWG9arvTFYTqchtCCXtwH0iVc+A6gvc3seBBGLXTet+rGX9eUnl+MkQYiH8BOWkgjlB3kYFYMnCUj5aCkXYcnC4Yc5WRK6eGcIUEOqJ4R657GaWeqKBirb8cFIi/t5mlqYMKMwnKaTUAAAOw==\"","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { ChakraProvider } from '@chakra-ui/react';\nimport App from './App';\n\nReactDOM.render(\n  <ChakraProvider>\n    <App />\n  </ChakraProvider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}